



##  **jar** **包下载**

http://kafka.apache.org/downloads.html





## **Kafka** **集群部署**

1、**解压安装包**

```

[root@hadoop2 software]# tar -zxvf kafka_2.11-0.11.0.2.tgz  -C /opt/module/

```



**2、修改解压后的文件名称**

```
[root@hadoop2 module]# mv kafka_2.11-0.11.0.2/ kafka

```



**3、修改配置文件(**/opt/module/kafka/config)

server.properties



```
#broker 的全局唯一编号，不能重复
broker.id=0


#删除 topic 功能使能
delete.topic.enable=true


#处理网络请求的线程数量
num.network.threads=3


#用来处理磁盘 IO 的现成数量
num.io.threads=8


#发送套接字的缓冲区大小
socket.send.buffer.bytes=102400


#接收套接字的缓冲区大小
socket.receive.buffer.bytes=102400


#请求套接字的缓冲区大小
socket.request.max.bytes=104857600 

#kafka 运行日志存放的路径
log.dirs=/opt/module/kafka/logs

#topic 在当前 broker 上的分区个数
num.partitions=1


#用来恢复和清理 data 下数据的线程数量
num.recovery.threads.per.data.dir=1
```



**4、配置环境变量**

```
 vi /etc/profile
 
export KAFKA_HOME=/opt/module/kafka
export PATH=$PATH:$KAFKA_HOME/bin
 
```



**5、分发安装包**

```
xsync kafka/
```

注意：分发之后记得配置其他机器的环境变量



**6、 hadoop103 和 hadoop104 上修改配置文件**

/opt/module/kafka/config/server.properties   broker.id 不得重复

**broker.id=1、broker.id=2**



**7、启动机器上的zk服务**



**8、启动集群**

```
[root@hadoop2 kafka]# bin/kafka-server-start.sh  config/server.properties
```

是一种阻塞进程



此时可以加入一个-

-daemon参数进行作为守护进程启动

```
[root@hadoop2 kafka]# bin/kafka-server-start.sh -daemon  config/server.properties
```



使用jps

```
[root@hadoop2 kafka]# jps
1616 QuorumPeerMain
2180 Kafka
2247 Jps
```



**9、关闭集群**

```
 bin/kafka-server-stop.sh stop
```

